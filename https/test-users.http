### Variables
@gatewayUrl = http://localhost:3000

# Run test-auth.http first to get login token
# Copy the accessToken from login response and paste here:
@token = PASTE_TOKEN_HERE

###############################################
# User Service Tests
###############################################

###
# 1. GET /api/users/me - Get user data
###
GET {{gatewayUrl}}/api/users/me
Authorization: Bearer {{token}}

###
# Verify:
# - All user fields including credits, stats, badges
# - Status 200

###
# 2. POST /api/users/credits - Add credits
###
POST {{gatewayUrl}}/api/users/credits
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "amount": 5000
}

###
# Verify:
# - credits increased by 5000

###
# 3. GET /api/users/me - Verify credits updated
###
GET {{gatewayUrl}}/api/users/me
Authorization: Bearer {{token}}

###
# 4. POST /api/users/credits - Subtract credits
###
POST {{gatewayUrl}}/api/users/credits
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "amount": -2000
}

###
# Verify:
# - credits decreased by 2000

###
# 5. POST /api/users/credits - Try to subtract too many (should fail)
###
POST {{gatewayUrl}}/api/users/credits
Content-Type: application/json
Authorization: Bearer {{token}}

{
    "amount": -99999
}

###
# Verify:
# - Status 400
# - Error: "Insufficient credits"

###
# 6. GET /api/users/me - Without token (should fail)
###
GET {{gatewayUrl}}/api/users/me

###
# Verify:
# - Status 401
# - Error: "Unauthorized"
